@using ScreenTimeManager.Models
@using ScreenTimeManager.Models.Enums
@model IEnumerable<ScreenTimeManager.Models.RuleBase>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@if (User.IsInRole("Admin") || User.IsInRole("Parent") || User.IsInRole("Child"))
{
    @*The sorting and arranging should probably be done in the controller*@
    @*This way, the controller could rearrange on request*@
    @*Order by name, then separate into groups by add/subtract*@
    foreach (IGrouping<RuleModifier, RuleBase> group in Model.OrderBy(r => r.RuleTitle).GroupBy(r => r.RuleModifier))
    {
        foreach (RuleBase item in group)
        {
            Html.RenderPartial("_Rule", item);
        }
    }
}