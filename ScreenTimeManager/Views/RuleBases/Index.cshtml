@using ScreenTimeManager.Models
@model IEnumerable<RuleBase>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@if(User.IsInRole("Admin") || User.IsInRole("Parent"))
{
    @*The sorting and arranging should probably be done in the controller*@
    @*This way, the controller could rearrange on request*@
    @*Order by name, then separate into groups by add/subtract*@
    foreach(var group in Model.OrderBy(r => r.RuleTitle).GroupBy(r => r.RuleModifier))
    {
        foreach (RuleBase item in group)
        {
            if (item.IsExpired || item.IsHidden)
            {
                continue;
            }
            Html.RenderPartial("_Rule", item);
        }
    }
}