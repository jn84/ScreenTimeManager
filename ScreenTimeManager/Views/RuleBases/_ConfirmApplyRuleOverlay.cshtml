@using ScreenTimeManager.DataModel.DataContexts
@using ScreenTimeManager.Models.Enums
@using WebGrease.Css
@model ScreenTimeManager.Models.RuleBase

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <p class="modal-title" id="myModalLabel">Confirm Screen Time Change</p>
</div>

@if (Model == null) // TODO: DEBUG CODE
{
    throw new NullReferenceException();
}

@using (Html.BeginForm("ChangeTime", "RuleBases", new { id = Model.Id }, FormMethod.Post, new { id="modalForm" }))
{
    <div class="modal-body">

        @Html.AntiForgeryToken()
        <p><strong>@Model.RuleTitle</strong></p>
        <p>@Model.RuleDescription</p>
        
        <!-- Render partial here-->
        
        <!-- <hr/> -->

        <!-- Summary of what will be added-->
        
        @switch (Model.RuleType)
        {
            case RuleType.Fixed:
            {
                Html.RenderPartial("_FixedInput", Model);
                break;
            }
            case RuleType.Variable:
            { 
                Html.RenderPartial("_VariableInput", Model);
                break;
            }
        }

    </div>
    <div class="modal-footer">
        <div class="button-container">
            <button class="cancel-apply" type="button" data-dismiss="modal">Cancel</button>
        </div>
        <div class="button-container">
            <button class="confirm-apply" type="submit">Submit</button> <!-- TODO: Change to id for javascript on click function-->
        </div>
    </div>
}


